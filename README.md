# Marine-air-defense-simulation-based-on-Unity3D
Marine air defense simulation based on Unity in 2020

2.1.1系统整体架构
在系统底层是数据资源层，包括模型文件和资源文件，Unity3D引擎本质上是通过脚本对这些模型和资源进行操作和处理，底层中还有数据库文件，数据库中目前存储有任务列表、舰船生成任务列表、敌方攻击任务列表、友方火炮反击任务列表、友方舰船移动任务列表。其中整个数据库中以唯一任务id区分。
系统第二层为三维引擎层，包括Unity3D三维引擎和VS平台作为开发环境，主要在这一层实现系统功能区分和实现。
系统第三层为应用层，这一层为所开发的系统，能完成需求分析中所要求的功能，为外界提供三个主要功能：作战参数输入和修改、三维实景展示、二维态势展示、防空效能评价功能。

2.1.2系统功能模块设计
到目前，所开发的舰队联合防空仿真分为六个模块，分别是作战想定输入模块、预警模块、指挥决策模块、舰艇控制模块、武器系统模块、防空效能评估模块。各模块相关功能可见下图。

2.1.3数据库设计
作战数据库是整个系统中至关重要的部分，此系统到目前为止共有四张表：
①	all_task系统所有任务表
②	weapon_task武器系统表
③	move_task舰船移动数据表
④	addobj_task动态添加舰船信息表
这四张表中均以all_task为参考表，均以id为主键唯一标识符号。
各表中index如下图：
 
优化数据库效率的方法：
①	将对数据库进行操作的方法封装为单例类，对外提供统一的接口
②	使用数据库连接池，节约打开和关闭数据库操作所耗费的资源
3.当前进度
通过模拟系统运行过程，逐步完善系统运行过程中的各个模块。
 
作战任务添加模块：在仿真系统运行最开始，需要输入作战想定参数，目前所能实现的输入参数有：友方舰艇按照位置添加、敌方导弹按照时间和方位设定，主体功能已经完善，在作战任务添加完成后，系统将所有任务添加至作战数据库中以供仿真系统运行使用。
自动控制脚本：由于整个系统在仿真过程中是不需要人为手动操作的，因此需要利用自动控制脚本来进行控制，其基本原理是通过整个仿真系统所设定的时间自动获取所有任务，然后根据任务类型对任务进行分发，驱动程序运行。
目前所能实现的三个主要功能是：敌机攻击功能、友方拦截敌方导弹功能、友方目标舰艇根据来袭目标规避功能。敌机攻击功能：通过自动控制脚本所下达的任务编号，在达到作战想订时输入的预设时间时请求武器系统数据库获取该任务编号的具体信息，包括发射敌机编号、目标等等，获取之后执行攻击任务；友方拦截功能：在敌军导弹发射之后，如果导弹飞行进入友方预警机检测范围，则会启动指挥控制系统，指控系统根据一系列联合算法对来袭的该导弹进行目标判定、威胁评估之后生成拦截方案以及舰艇规避方案（这部分具体算法目前尚未完成），拦截方案和舰艇规避方案在生成后会进入择机执行状态（初步想法是简历任务执行池，结合火力的重调度算法高效执行）最后将会执行拦截或舰艇规避任务，待任务执行完毕之后，对执行结果做一个评估，如果拦截成功则完成任务，拦截不成功则将该目标视为新出现目标即可。
-2020.4.14

添加堆结构对任务进行优先级调度，堆调整的key为威胁评估系统评价出来的优先级（值），但需要具体实现。
-2020.4.16

为打击资源、制导资源、探测资源添加辅助射线，可见图4.17，同时优化部分代码（数据库模块、内存管理），游戏运行更加流畅稳定。
-2020.4.17

实现任务堆的创建，调整，弹出任务级别最高的任务节点并分配制导资源、打击资源进行来接，对于来袭目标有三种可能情况：1.新目标出现（威胁程度更高），因为堆的上浮机制可迅速达到触发条件；2.拦截目标失败，则将该目标的现有威胁程度x2,然后直接加入任务堆，跟情况1类似；3.拦截目标成功，则立即释放制导资源和预警资源，打击资源在拦截导弹发射两秒之后自动释放。
对部分流程进行重新设计，使之更符合实战条件之下的战术过程。
经过压力测试，在六艘舰艇，每艘舰艇打击资源1，制导资源3，预警资源3的情况下，在敌方4分钟内连续攻击50次，我方打击敌军100次的情况下，我方目标送受损率不足5%，优秀！部分运行截图可如4.18
-2020.4.18
